#!/bin/sh
(
	if [ $# -eq 0 ]; then
		echo "local" >&2
		rpm -qa --qf='%{INSTALLTIME:day} %{NAME}-%{VERSION}-%{RELEASE}.%{ARCH} %{VENDOR}\n'
	else
		echo "file" >&2
		cat "$@"
	fi
) |
python -c "
import	os
import	sys
import	time
import	datetime
lines = []
for line in sys.stdin:
	tokens = line.rstrip().split()
	if len(tokens) >= 3:
		when = tokens[0]
		name = tokens[1]
		rest = tokens[2:]
		lines.append( (when, name, rest) )
lines.sort(
	key = lambda (when,name,rest): when
)
for (when, name, rest) in lines:
	# stim = time.gmtime( int(when) )
	s = datetime.datetime.fromtimestamp( int(when) )
	print '%s  %-63s  %s' % (
		s,
		name,
		' '.join(rest)
	)
exit(0)
"
